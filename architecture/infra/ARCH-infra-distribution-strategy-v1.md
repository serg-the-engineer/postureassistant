---
id: ARCH-infra-distribution-strategy
title: "Infra. Application Distribution Strategy"
type: process
layer: infrastructure
owner: "@team-vision"
version: v1
status: current
created: 2025-08-09
updated: 2025-08-09
tags: [deployment, packaging, pyinstaller, release]
depends_on: []
referenced_by: []
---

## Context
This document outlines the strategy for packaging and distributing the Posture Assistant application to end-users on major desktop platforms (Windows, macOS). The goal is to provide a standard, user-friendly installation experience that does not require users to interact with source code, install Python, or manage dependencies manually. The presence of `PostureAssistant.spec` indicates this strategy is actively in use.

## Structure
The distribution process is a two-stage pipeline:

1.  **Bundling:** The Python application, its dependencies (PyQt6, OpenCV, etc.), and all necessary assets (`.png`, `.xml` files) are bundled into a platform-specific executable format.
    *   **Tool:** `PyInstaller` is used for this stage, configured via the `PostureAssistant.spec` file.
    *   **Output:** A single directory (or single file) containing the executable (`PostureAssistant.exe` on Windows, `PostureAssistant.app` on macOS).

2.  **Packaging:** The bundled output is then packaged into a conventional installer or disk image for easy distribution.
    *   **Windows:** The output directory from `PyInstaller` should be packaged into a `.exe` installer using a tool like **Inno Setup** or **NSIS**. The installer will handle creating Start Menu shortcuts, an uninstaller entry in "Add or Remove Programs", and placing the application in `C:\Program Files`.
    *   **macOS:** The `PostureAssistant.app` bundle generated by `PyInstaller` is packaged into a `.dmg` (Apple Disk Image) file. This allows users to drag-and-drop the application into their `/Applications` folder, which is the standard installation method on macOS.

## Behavior
### Release Workflow (Proposed)
1.  A new version is tagged in the Git repository (e.g., `v1.1.0`).
2.  A CI/CD pipeline (e.g., GitHub Actions) triggers on the new tag.
3.  Separate jobs run on Windows and macOS virtual machines.
4.  Each job runs `PyInstaller` to bundle the app, then uses the respective packaging tool (Inno Setup/`create-dmg`) to create the final installer/disk image.
5.  The resulting `.exe` and `.dmg` files are uploaded as artifacts to a new GitHub Release.
